String.prototype.xsplit=function(c){if("a~b".split(/(~)/).length===3){return this.split(c)}if(!c.global){c=new RegExp(c.source,"g"+(c.ignoreCase?"i":""))}var d=0,b=[];var a;while((a=c.exec(this))!==null){b.push(this.slice(d,a.index));if(a.length>1){b.push(a[1])}d=c.lastIndex}if(d<this.length){b.push(this.slice(d))}if(d===this.length){b.push("")}return b};var wpm_translator={string_to_ml_array:function(p){if(Object.prototype.toString.call(p)!=="[object String]"){return p}var o=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi;var a=p.xsplit(o);if(typeof a!=="object"||!Object.keys(a).length){return p}if(Object.keys(a).length===1){return a[0]}var k={},e=wpm_translator_params.languages,g=e.length;while(g--){k[e[g]]=""}var f=/<!--:([a-z]{2})-->/gi;var m=/\[:([a-z]{2})\]/gi;var d=/\{:([a-z]{2})\}/gi;var c=false;var l;for(var h=0;h<a.length;++h){var n=a[h];if(!n.length){continue}l=f.exec(n);f.lastIndex=0;if(l!==null){c=l[1];continue}l=m.exec(n);m.lastIndex=0;if(l!==null){c=l[1];continue}l=d.exec(n);d.lastIndex=0;if(l!==null){c=l[1];continue}if(n==="<!--:-->"||n==="[:]"||n==="{:}"){c=false;continue}if(c){if(typeof(k[c])!=="undefined"){k[c]+=n}c=false}}return k},translate_string:function(b,d){var a=wpm_translator.string_to_ml_array(b);if(typeof a!=="object"||!Object.keys(a).length){return b}var c=wpm_translator_params.languages;if(d){if(typeof(c[d])!=="undefined"){return a[d]}else{return""}}d=wpm_translator_params.language;if(!a[d].length&&wpm_translator_params.show_untranslated_strings==="1"){return a[wpm_translator_params.default_language]}return a[d]}};