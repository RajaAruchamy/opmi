(function(a){a(function(){a(document).on("click",".delete-language",function(){var b=a(this);if(confirm(wpm_params.confirm_question)){var c={action:"wpm_delete_lang",locale:b.data("locale"),security:wpm_params.delete_lang_nonce};a.ajax({url:wpm_params.ajax_url,type:"post",data:c,dataType:"json",complete:function(){b.parent().parent().fadeOut("slow",function(){a(this).remove()})},error:function(f,d,e){alert(e+"\r\n"+f.statusText+"\r\n"+f.responseText)}})}});a("#wpm-languages tbody").sortable({handle:"td:first-child"});a(document).on("change",".wpm-flags",function(){var b=a(this);if(b.val()){var c=wpm_params.plugin_url+"/flags/"+b.val()+".png";if(b.next().length){b.next().attr("src",c)}else{b.parent().append('<img src="'+c+'">')}}else{b.next().remove()}});a("#WPLANG").parents("tr").hide();a("#add_lang").click(function(){var b=wp.template("wpm-add-lang");var c=wpm_params.available_translations[a("#wpm-available-translations").val()];if(typeof c==="undefined"){c={language:"",native_name:"",iso:{0:""}}}c.count=wpm_lang_count;a("#wpm-languages tbody").append(b(c)).sortable({handle:"td:first-child"});a('[name="wpm_languages['+wpm_lang_count+'][flag]"]').val(c.iso[Object.keys(c.iso)[0]]).trigger("change");a("#wpm-available-translations").val("");wpm_lang_count++})})}(jQuery));